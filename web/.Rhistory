if (!requireNamespace("remotes")) {
install.packages("remotes")
}
remotes::install_github("kolesarm/ManyIV")
library(ManyIV)
library(data.table)
library(haven)
library(fixest)
library(SteinIV)
install.packages("SteinIV")
library(SteinIV)
install.packages("data.table")
library(data.table)
df <- read_dta("https://github.com/Mixtape-Sessions/Instrumental-Variables/blob/main/Data/stevenson.dta?raw=true")
setDT(df)
df <- df[black == 1, ]
View(df)
est <- feols(jail3 ~ judge_pre_.[1:7], df)
df[, leniency := predict(est)]
df[, more_lenient := (leniency > median(leniency))]
feols(guilt ~ jail3, df, vcov="hc1")
feols(guilt ~ 1 | 0 | jail3 ~ i(more_lenient), df, vcov="hc1")
feols(prior_felChar ~ i(more_lenient), df, vcov="hc1")
feols(prior_felChar ~ i(more_lenient) | bailDate, df, vcov="hc1")
feols(guilt ~ jail3 | bailDate, df, vcov="hc1")
feols(guilt ~ 1 | bailDate | jail3 ~ more_lenient, df, vcov="hc1")
df[,
Y_omD := guilt * (1 - jail3)
][,
omD := (1 - jail3)
]
feols(Y_omD ~ 1 | bailDate | omD ~ i(more_lenient), df, vcov="hc1")
summary(df[jail3 == 0, "guilt"])
feols(guilt ~ 1 | 0 | jail3 ~ judge_pre_.[1:7], df, vcov="hc1")
feols(guilt ~ 1 | 0 | jail3 ~ leniency, df, vcov="hc1")
jive.est(
y = df$guilt, X = as.matrix(df[,.(intercept = rep(1, .N), jail3)]),
Z = as.matrix(df[,.SD, .SDcols=patterns("judge_pre_")])
)
df[, judge := (judge_pre_1 == 1) * 1 +
(judge_pre_2 == 1) * 2 +
(judge_pre_3 == 1) * 3 +
(judge_pre_4 == 1) * 4 +
(judge_pre_5 == 1) * 5 +
(judge_pre_6 == 1) * 6 +
(judge_pre_7 == 1) * 7 +
(judge_pre_8 == 1) * 8]
df[, num := .N, by = judge]
df[, lo_leniency := (leniency*num - jail3)/(num - 1)]
feols(guilt ~ 1 | 0 | jail3 ~ lo_leniency, df, vcov="hc1")
feols(guilt ~ 1 | bailDate | jail3 ~ judge_pre_.[1:7], df, vcov="hc1")
ivreg(
y = df$guilt, T = df$jail3,
Z = as.matrix(df[,.SD, .SDcols=patterns("judge_pre_")]),
W = as.matrix(df[, .(rep(1, .N))]), # Constant only
noConstant = FALSE
)
install.packages("ivreg")
ivreg(
y = df$guilt, T = df$jail3,
Z = as.matrix(df[,.SD, .SDcols=patterns("judge_pre_")]),
W = as.matrix(df[, .(rep(1, .N))]), # Constant only
noConstant = FALSE
)
library(ivreg)
ivreg(
y = df$guilt, T = df$jail3,
Z = as.matrix(df[,.SD, .SDcols=patterns("judge_pre_")]),
W = as.matrix(df[, .(rep(1, .N))]), # Constant only
noConstant = FALSE
)
source("https://raw.githubusercontent.com/j-seward/ujive/main/ivreg_001.R")
ivreg(
y = df$guilt, T = df$jail3,
Z = as.matrix(df[,.SD, .SDcols=patterns("judge_pre_")]),
W = as.matrix(df[, .(rep(1, .N))]), # Constant only
noConstant = FALSE
)
blogdown::hugo_build(local=TRUE)
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::serve_site()
blogdown::hugo_build(local=TRUE)
blogdown::hugo_build(local=TRUE)
blogdown::serve_site()
blogdown::hugo_build(local=TRUE)
blogdown::serve_site()
blogdown::serve_site()
